{% extends "layout.html" %}

{% block content %}
    <div class="header">
        <h1 class="page-title">Your Habits</h1>
    </div>


    {% if habits|length == 0 %}
        <div class="homepage">
            <p>You currently have no habits! 
                <a style="text-decoration: underline; padding: 0;" href=" {{ url_for('create_habit') }}" class="navlinks">Create</a> one now!
            </p>
        </div>  
    {% else %}
    <div class="habits">
        <ol class="habits-list" id="sortable">
        {% for habit in habits %}
            <li class="habit" id="habit-{{habit.id}}">
                    <div>
                        <small class="text-muted">Created on {{ habit.date_created.strftime('%Y-%m-%d') }}</small>
                        <h2 class="habit-title"><a href="{{ url_for('single_habit', habit_id=habit.id) }}">{{ habit.title }}</a></h2>
                        <p class="habit-content">{{ habit.content }}</p>
                        
                        {% if habit.checkins|length > 0 and (now.date() - habit.date_created.date()).days == habit.checkins[-1].day %} 
                            <a id="{{habit.id}}" class="checked_in" >Checked In! &#10003;</a>
                        {% else %}
                            <a id="{{habit.id}}" class="check_in" onclick='checkin("{{habit.id}}")'>Check In &#10003;</a>
                        {% endif %}
                    </div>
            </li>
        {% endfor %}
        </ol>
    </div>

    <div style="margin: 200px auto 100px auto; text-align: center; font-size: 1.3em;">
        <a href="" class="navlinks">Archived Habits</a>
    </div>
    {% endif %}

    <script src="{{ url_for('static', filename='checkin.js') }}"></script>

{% endblock content %}

